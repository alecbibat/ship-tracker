<table>
  <thead>
    <tr>
      <th>Ship</th>
      <th>Status</th>
      <th>Current Location</th>
      <th>Previous Port</th>
      <th>Next Ports</th>
      <th>Local Time</th> <!-- NEW COLUMN -->
    </tr>
  </thead>
  <tbody>
    <% statuses.forEach(s => { %>
      <tr>
        <td style="display: flex; align-items: center;">
          <img src="/ships/<%= s.ship.toLowerCase().replace(/ /g, '_') %>.jpg"
               alt="<%= s.ship %>" style="height: 40px; margin-right: 10px; border-radius: 4px;" />
          <a href="<%= shipLinks[s.ship] %>" target="_blank" style="text-decoration: none; font-weight: bold;">
            <%= s.ship %>
          </a>
        </td>

        <td><%= s.currentStatus %></td>

        <td>
          <% if (s.currentPort) { %>
            <a href="https://www.google.com/maps/search/?q=<%= encodeURIComponent(s.currentPort) %>" target="_blank">
              <%= s.currentPort %>
            </a>
          <% } %>
        </td>

        <td>
          <% if (s.previousPort) { %>
            <a href="https://www.google.com/maps/search/?q=<%= encodeURIComponent(s.previousPort) %>" target="_blank">
              <%= s.previousPort %>
            </a>
          <% } %>
        </td>

        <td>
          <% s.nextPorts.forEach((p, i) => { %>
            <a href="https://www.google.com/maps/search/?q=<%= encodeURIComponent(p) %>" target="_blank"><%= p %></a><%= i < s.nextPorts.length - 1 ? ', ' : '' %>
          <% }) %>
        </td>

        <td><%= s.localTime %></td> <!-- RENDER LOCAL TIME SAFELY -->
      </tr>
    <% }) %>
  </tbody>
</table>
